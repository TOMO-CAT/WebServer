cc_library(
    name='sync',
    hdrs=[
        'thread_safe_queue.hpp',
        'rcu_ptr.hpp',
        'cow_ptr.hpp',
    ],
    srcs=[],
    deps=[
        '//logger:logger',
    ],
    visibility=['PUBLIC'],
)

cc_test(
    name='thread_safe_queue_test',
    srcs=[
        'thread_safe_queue_test.cc',
    ],
    deps=[
        ':sync',
    ],
)

cc_test(
    name='rcu_ptr_test',
    srcs=[
        'rcu_ptr_test.cc',
    ],
    deps=[
        ':sync',
        '//util/time:time',
        '//logger:logger',
        '//util:util',
    ],
)

cc_test(
    name='cow_ptr_test',
    srcs=[
        'cow_ptr_test.cc',
    ],
    deps=[
        ':sync',
        '//util/time:time',
        '//logger:logger',
        '//util:util',
    ],
)
