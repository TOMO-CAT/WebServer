# 进程和程序

## 程序

程序是包含一系列信息的文件，这些信息描述了如何在运行时创建一个进程：

* 二进制格式标识：每个程序文件都包含用于描述可执行文件格式的元信息，内核利用此信息来解释文件中的其他信息。
* 机器语言指令：对程序算法进行编码
* 程序入口地址：标识程序开始执行时的起始指令位置
* 数据：程序文件包含的变量初始值和程序使用的字面量值（比如字符串）
* 符号表及重定位表：描述程序中函数和变量的位置及名称，这些表格有多重用途，其中包含调试和运行时的符号解析（动态链接）
* 共享库和动态链接信息：程序文件所包含的一些字段，列出了程序运行时需要使用的共享库，以及加载共享库的动态链接的路径名
* 其他信息：程序文件还包含其他信息，用以描述如何创建进程

## 进程

进程是正在运行的程序的实例。是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。是系统进行资源分配和调度的基本单位，是操作系统结构的基础。

## 进程控制块

为了管理进程，内核必须对每个进程所做的事情进行清楚的描述。内核为每个进程分配一个 PCB（Processing Control Block） 进程控制块，维护进程相关的信息，Linux 内核的进程控制块是 `task_struct` 结构体。其内部成员很多，我们只需要掌握以下部分即可：

* 进程 id：系统中每个进程有一个唯一的 id，用 `pid_t` 类型表示，在 `/proc/pid/` 目录下可以看到每个进程的 id。
* 进程的状态：包含就绪、运行、挂起、停止、僵尸等状态。
* 进程切换时需要保存和恢复的一些 CPU 寄存器
* 描述虚拟地址空间的信息
* 描述控制终端的信息
* 当前工作目录（Current Working Directory）
* umask 掩码
* 文件描述符表，包含很多指向 `file` 结构体的指针
* 和信号相关的信息
* 用户 id 和组 id
* 会话（Session）和进程组（Process Group）
* 进程可以使用的资源上限（Resource Limits）
